# Roles

- student
- teacher
- studijni oddeleni person
- dekan
- user \= any

# Feature discovery

## 1. Course discovery **(CORE)**

* **Who**: Student / Teacher / Anyone basically
* **What**: find a course description
* **Why**: To view what courses are available, search and filter them. As a user (any user) I need to be able to search through courses.

### Feature breakdown

1. A User opens Course Dashboard™.
2. System provides the User with a Course Overview and a search module with available search filters.
3. User selects and applies search filters / query to the search module and submits their query.
4. System queries the DB based on User’s requirements.
5. System provides a view of applicable Courses to the User in the Filtered Course view.
6. User selects a Course to proceed with View a Course or does some other action.

### Responsibilities

**User interface responsibilities**
* Display the Course Dashboard™ with an overview of available courses.
* Present a search module with filters and query options that users can select.
* Validate the user’s search inputs and selected filters for correctness.
* Provide immediate feedback if no courses match the search criteria.
* Display filtered courses with the most important information (e.g., title, which semester it's taught in, etc.).
* Support pagination, scrolling, or “load more” functionality for large result sets.

**Course data retrieval responsibilities**
* Query the database to retrieve all available courses.
* Apply user-provided search filters to generate a filtered course list.
* Handle partial matches, keyword searches, and similar terms to improve search flexibility.
* Cache frequently requested courses or popular queries for faster response.

**Navigation and linking responsibilities**

* Enable users to click on a course to view detailed information via the View a Course feature.
* Possibly could have a feature for bookmarking or saving courses from the search results.

## 2. View a Course **(CORE)**

* **Who**: Student
* **What**: Views a single Course description
* **Why**: To obtain information about a Course.

The user wants to get a more precise overview of a given course. Such information could include general
infomation about the course, who teaches it, comments about it, ...

### Feature breakdown

1. User is somehow redirected to the Course page via a link or through the Course Discovery feature.
2. The System provides the User with a Course page with several elements: title, short details, long description…
3. The User can read and view information about the Course
4. The user can click a button "can I enroll?"
5. The system checks whether the user can - is a student?, prerequisites?, credit limits?
   1. if TRUE: a notification whether to proceed with enrolling
   2. if FALSE: false notification
6. The user can check a comment section of the subject by clicking on 'comments'
   * a new view is generated with comments from previous students

### Responsibilities

**Authentication and session management responsibilities**

* Fetch authentication data from an external authenticator upon User login.
* Store and maintain authentication details in the current session for quick access.

**Authorization responsibilities**

* Validate that the current User is allowed to view the Course before providing any information.

**Course data retrieval responsibilities**

* Query the persistence layer to fetch course details, including title, short details, long description and other details.

**Comment data retrieval**
* Fetch all comments and their related information (Author, Date, Mark).

**Notification 'can I enroll?' response**
* Display a notification about the success of the operation after the user clicks whether they can enroll.
* Display a notification if no comments written yet.

**Auditing and logging responsibilities**

* Log all enrollment actions, including user details, timestamps, and outcomes, for audit trails.
* Monitor for anomalies (e.g., repeated failed attempts) to ensure system security and compliance.

**User interface responsibilities**

* Provide viewing elements like text boxes, Course icons, detailed info view. Allow users to navigate to other functionalities
via visual interface with buttons, links and similar features (to e.g. **[3.]**).
* Display comments section. If no comments found, no view is generated, notification displayed.


## 3. Enroll to course **(CORE)**

* **Who**: Student
* **What**: enroll yourself
* **Why**: To be officially enrolled in a currently offered course (or on a waiting list)

As a student, teacher, or admin, I want to enroll myself or a specified student into a course so that I can officially register for the course (or be added to a waiting list if capacity is exceeded), ensuring proper access to course materials and tracking.

### Feature breakdown

1. The user navigates to the course view page (e.g., via course discovery or a direct link) and selects the "Enroll" option.
2. The system checks the user's authentication and authorization details from the current session to determine eligibility (e.g., verifying if the user is a current student).
3. For students, the system validates mandatory prerequisites, such as completed prior courses, current credit limits, and enrollment caps.
4. The system retrieves available course tickets (schedules or sections) from the persistence layer (e.g., database) and displays them to the user for selection.
5. The user selects a preferred ticket.
6. The system performs additional checks on the selected ticket, including capacity availability, schedule conflicts with the enrollee's existing timetable, and any overlaps with other courses.
7. Based on the validation outcomes:

   * If all checks pass, the system enrolls the student by updating the course roster in the persistence layer, assigns them to the ticket, and logs the action for auditing.
   * If capacity is exceeded, the system adds the student to a waiting list and notifies them.
   * If mandatory checks fail, the system displays an error message with details.
   * If non-mandatory checks (e.g., minor warnings) fail, the system shows a warning but allows proceeding if the user confirms.

8. The system refreshes the user's dashboard or course view, displaying a success notification, updated enrollment status, and any relevant outputs (e.g., confirmation email or updated timetable).
9. Behind the scenes, the system updates related records (e.g., credit counts, waiting list positions) and ensures data consistency across modules like course management and student profiles.

### Responsibilities

**Authentication and session management responsibilities**

* Fetch authentication data from an external authenticator upon user login.
* Store and maintain authentication details in the current session for quick access.

**Authorization and eligibility validation responsibilities**

* Determine user roles (student, teacher, admin) based on session data.
* For teachers: Verify if they are assigned to teach the course.
* For admins: Grant unrestricted enrollment privileges.
* For students: Check prerequisites (e.g., passed courses) and current credit limits against system-defined maximums.
* Prompt for additional student details (e.g., ID) when a teacher or admin is enrolling on behalf of someone.

**Course data retrieval responsibilities**

* Query the persistence layer to fetch course details, including available tickets and current enrollment counts.
* Filter and cache course data temporarily for efficient display during the enrollment process.

**Ticket selection and validation responsibilities**

* Display available tickets with details like schedule, capacity, and instructor.
* Validate selected ticket against the enrollee's existing timetable for conflicts.
* Check ticket capacity and automatically handle overflow by routing to waiting list management.
* Report validation results (success, warnings, errors) back to the user interface.

**Enrollment execution responsibilities**

* Update the course roster in the persistence layer by adding the student's ID to the selected ticket.
* Adjust related student records, such as incrementing credit counts or updating study progress.
* Handle waiting list additions, including position assignment and notifications for future availability.

**Notification responsibilities**

* Generate success, warning, or error notifications for display on the user interface.
* Send confirmation outputs, such as emails or in-app messages, to the enrollee and relevant parties (e.g., teacher).

**Auditing and logging responsibilities**

* Log all enrollment actions, including user details, timestamps, and outcomes, for audit trails.
* Monitor for anomalies (e.g., repeated failed attempts) to ensure system security and compliance.

**Error handling and recovery responsibilities**

* Display descriptive error messages for failed validations without exposing sensitive data.
* Allow user confirmation for proceeding with warnings (e.g., minor schedule overlaps).

**Data consistency and persistence responsibilities**

* Ensure atomic updates across related entities (e.g., course, student, ticket) to avoid inconsistencies.
* Communicate with persistence layer modules (e.g., course manager) to store changes durably.
* Sync waiting lists with course capacities to promote users automatically when spots open.

**User interface interaction responsibilities**

* Provide interactive elements like buttons, forms, and prompts for input collection (e.g., ticket selection).
* Handle user inputs securely, validating them client-side before submission to reduce server load.
* Offer fallback options, such as canceling enrollment or redirecting to support if issues arise.

## 4. Leave courses **(CORE)**

* **Who**: Student
* **What:** Leave a course
* **Why**: To be able to leave a course (As a student, I need to be able to leave boring courses)

### Features breakdown

1. The student clicks (on enrolled course view)
2. The system queries the DB and fetches enrolled courses for the given student
3. The systems show the course view.
4. The student clicks “LEAVE COURSE” on the course which he wants to leave.
5. The system displays notification if he is sure that he wants to leave the course
   1. Student selects Cancel.
      1. The system closes the popup and the student sees again the enrolled course view
   2. Student selects Confirm.
      1. The system removes the student from the specified course.
      2. The system queries the DB and removes the course from the student’s enrolled course.
      3. The system closes the popup and refreshes the enrolled course view.

### Responsibilities

**Authentication and session management responsibilities**
* Retrieve user session data to identify the student performing the action.
* Maintain session continuity while interacting with the enrolled courses view.

**Authorization and eligibility validation responsibilities**

* Verify that the user is allowed to leave the course (e.g., student enrolled is in the course, not a teacher/admin trying to leave).
* Check system rules for leaving courses (e.g., deadlines, mandatory course requirements).

**Course data retrieval responsibilities**
* Fetch the list of courses the student is enrolled in from the database.
* Retrieve relevant course metadata (e.g., course title, semester) to display in the enrolled courses view.

**User interface interaction responsibilities**
   
* Display the enrolled courses view with interactive elements.
* Provide a “Leave Course” button for each eligible course.
* Display a confirmation popup when the student initiates leaving a course.
* Provide options within the popup to confirm or cancel the action.
* Close the popup after the user makes a selection.

**Course leaving execution responsibilities**

* Remove the student from the course in the database.
* Update related records (e.g., course roster, student’s enrolled courses).
* Refresh the enrolled courses view to reflect the change.

**Notification and feedback responsibilities**

* Show notifications confirming the course has been successfully left.
* Provide feedback if the student cannot leave due to system rules or errors.

**Auditing and logging responsibilities**

* Log all enrollment actions, including user details, timestamps, and outcomes, for audit trails.
* Monitor for anomalies (e.g., repeated failed attempts) to ensure system security and compliance.


## 5. Course surveys **(CORE)**

* **Who**: Student / Teacher / Admin
* **What**: view comments of previous participants / write one yourself
* **Why**: to get more infomation about a course which can be captured only with prior experience; to be
able to express one's opinion about the quality / possible improvement of a given course. As a teacher / admin,
getting feedback from students is essential. They would also be able to delete harmful comments.

### Features breakdown

1. The user navigates towards a course view [2.] and clicks on *comments*
2. The system generates a view for the course's comment section.
   - the comments are rated in terms of date
3. The user can load more comments, order them in a different way (date old/new, relevency,...)
4. The user can add a *relevancy* to a comment by selecting a certain button (similar to like). The user can also
add a comment to the comment's thread.
   - the system checks whether the student has passed the course in the last *X* years.
5. When adding a new comment / survey, decides if anonymous
   - if posting fails, a warning pop-up is displayed with reasons why
6. When a teacher or an admin decides to take down a certain survey, they should have a special view with an option to delete
   - notification of 'are you sure?' pop up
   - if done -> validation whether they have the rights to do so
   - ask for a reason why it was taken down from a list
   - delete the comment, store it into a different db for a while with
   the reason for deletion
   - update the view, the deleted comment shown differently to note
   it was deleted (but could be reinstated)

### Responsibilites

#### **Survey page viewer**
Display the initial view of course survey with some default settings.

#### **Admin survey page**
Display a special view (perhaps just the default view with extra features).

#### **Filter applier**
Updates the current survey view depending on the currenly selected filters (how to order
surveys, ...)

#### **Comment store and fetch**
Handles storing and fetching of comments / surveys to / from the persistence layer.

#### **Persitent survey storage**
Ensures all uploaded surveys are available for future use.

#### **Commenter validation**
Checks whether the current user should be able to post a new survey depending on various criteria.
If not, a notification is shown.

#### **Auditing and logging responsibility**
Logs new post and all errors and warnings for auditing purposes.

#### **Survey form handler**
Handles user-friendly UX for posting a new survey.

#### **Survey validator**
Validates posted surveys - missing mandatory fields, etc.

#### **Survey deletion validation**
Validate that the current user should be able to delete a survey.

#### **Deleted survey store and fetch**
Moves deleted surveys to a special db for a specific amount of time.
Deleted permanently after that. Reinstates a survey.

#### **Notification responsibility**
Displays a notification after a (un)sucessful new post. The notification changes depending on the success
status.

#### **Error handling**
When errors during survey posting occur, we have to know why and report a particular code and message to the
user in a notification.


## 6. Remaining mandatory courses and requirements **(CORE)**
* **Who**: student
* **What**: find courses needed to be taken to fulfill general and/or specific study requirements
* **Why**: to have all left mandatory courses in one place, to check the current state of one's study
plan

As a student, I want to know which mandatory courses, including for my specification, I have left to be able 
to reliably plan for my future schedule. I also want to figure out how many credit I have to obtain to finish
my studies and which areas these credits belong to.

**idea**: All of that should be interactive and plannable. The user should be able to enter 'plan mode' to pick
certain remaining courses and see the updated remaining required credits. 

### Featutes breakdown

1. The student navigates to the "Remaining Duties" module from the main dashboard or a dedicated menu.
2. The system authenticates the student’s session and retrieves their profile, including major, specialization (if applicable), and current study progress from the persistence layer.
3. The system queries the persistence layer to fetch:

   * Mandatory courses required for the student’s major and specialization.
   * Minimum credit requirements for degree completion.
   * The student’s completed courses and earned credits.

4. The system calculates the difference between required and completed courses/credits, identifying remaining mandatory courses and credit deficits.
5. The system displays a detailed view showing:

   * A list of remaining mandatory courses with details (e.g., course code, title, credits, unsatisfied prerequisites).
   * Total remaining credits needed, broken down by category (e.g., major, specialization, electives).
   * Specialization-specific elective groups with their own "out-of" credit requirements and suggested courses.

6. The student can click a course to view its detailed page (e.g., description, prerequisites) via 'View a Course'
feature
7. If the student selects the "Plan Mode" button, the system enters an interactive planning view where:

   * The student can mark desired courses to include in a future schedule. If the chosen course has an 
   unsatisfied prerequisite, a visual indication warns the user.
   * The system dynamically updates credit counts (total and per elective group) as courses are marked.
   * Visual cues (e.g., color-coded fields) show whether credit requirements are met.

8. The student can save the plan by clicking "Save Choices," which stores the configuration in the persistence layer,
overwriting any previous plan.
9. If the student clicks "Disable Plan Mode," the system discards unsaved changes and returns to the standard
Remaining Duties view.
10. The system logs all interactions (e.g., plan saves, course views) for auditing and ensures data consistency across related modules (e.g., student profile, course manager).

### Responsibilities
**Authentication and session management responsibilities**

* Authenticate the student’s identity using session data from an external authenticator.
* Maintain integrity to ensure secure access to the Remaining Duties module.
* Validate that the user is a registered student before granting access to study progress data.

**Student profile retrieval responsibilities**

* Query the persistence layer to fetch the student’s profile, including major, specialization, and study progress.
* Cache profile data temporarily to reduce database load during repeated interactions.
* Ensure profile data is up-to-date by syncing with the persistence layer in real-time (web sockets).

**Course and credit data retrieval responsibilities**

* Retrieve mandatory course requirements for the student’s major and specialization from the persistence layer.
* Fetch minimum credit requirements for degree completion and elective groups.
* Query the student’s completed courses and earned credits to calculate progress.

**Data calculation and analysis responsibilities**

* Calculate the difference between required and completed courses to identify remaining mandatory courses.
* Compute remaining credit deficits for major, specialization, and elective categories.

**User interface display responsibilities**

* Present a clear, structured view of remaining courses, credits, and elective groups with clickable links to course details.
* Render dynamic visual indicators (e.g. color-coded "out-of" fields) to show credit requirement status.
* Provide interactive elements like buttons for entering Plan Mode and selecting courses.

**Plan Mode interaction responsibilities**

* Enable an interactive planning view where students can mark/unmark courses.
* Dynamically update credit counts and visual indicators as courses are selected in Plan Mode.

**Plan validation and feedback responsibilities**

* Verify that marked courses meet prerequisite requirements.
* Provide real-time feedback (e.g. warnings, success messages) during Plan Mode interactions.

**Plan persistence responsibilities**

* Save the student’s selected plan to the persistence layer when "Save Choices" is clicked.
* Overwrite any existing plan while maintaining a backup for recovery if needed.

**Notification and output responsibilities**

* Display confirmation messages when a plan is saved or discarded.
* Notify the student of validation issues (e.g. conflicts) with clear, actionable feedback.
* Optionally send in-app or email summaries of saved plans for reference.

**Auditing and logging responsibilities**

* Log all student interactions with the Remaining Duties module, including plan saves, course views, and errors.
* Record timestamps, user IDs, and outcomes for audit trails.
* Monitor for anomalies (e.g. repeated failed validations) to ensure system integrity.

**Error handling and recovery responsibilities**

* Display descriptive error messages for issues like missing profile data or database errors without exposing sensitive information.
* Allow fallback options, such as reverting to the standard view if Plan Mode fails.
* Implement rollback mechanisms to undo partial plan saves in case of errors.

**Data consistency and synchronization responsibilities**

* Ensure complete updates across student profiles, course requirements, and saved plans to avoid inconsistencies.

## 7. Communicate with other students

* **Who**: Student/Teacher
* **What**: communicate with other students
* **Why**: be able to ask questions or schedule meetings with teachers, cooperate on tasks with students


## 8. Prerequisites

* **Who**: student
* **What**: find prerequisite and check if he/she has completed them
* **Why**: to ensure he/she is able to enroll and can count on it, possibly what has to be
done to sign up for the given course in the future

## 9. Current statistics

* **Who**: student / teacher / study department
* **What**: check current enrollment status
* **Why**: to assess current state of enrollment (jaký je zájem a tak)

## 10. Historical stats

* **Who**: student / teacher / study department
* **What**: access course stats from previous years
* **Why:** to learn from history, how popular it was, ...


## 11. Create a mock timetable

* **Who**: student
* **What**: create your own timetable
* **Why**: put together a possible schedule for the next semester

## 12. Manage course participation

* **Who**: teacher (of a given course), admin
* **What**: add/remove student from a certain course
* **Why**: to have administrative power over which student participate in a course. In a case of misdemeanour,
the system failed and the student should not have been able to enroll / was not able to enroll but should,...

## 13. Create / delete courses
* **Who**: admin
* **What**: create / delete courses
* **Why**: to extend the amount of offered courses by the uni or remove a course for whichever administritive
reason

