# Roles

- student
- teacher
- studijni oddeleni person
- dekan
- user \= any

# Feature discovery

## 1. Course discovery **(CORE)**

* **Who**: Student / Teacher / Anyone basically
* **What**: find a course description
* **Why**: To view what courses are available, search and filter them. As a user (any user) I need to be able to search through courses.

### Feature breakdown

1. A User opens Course Dashboard™.
2. System provides the User with a Course Overview and a search module with available search filters.
3. User selects and applies search filters / query to the search module and submits their query.
4. System queries the DB based on User’s requirements.
5. System provides a view of applicable Courses to the User in the Filtered Course view.
6. User selects a Course to proceed with View a Course or does some other action.

### 	Identify Responsibilities

* A User opens Course Dashboard™.
* System provides the User with a Course Overview and a search module with available search filters
  * visualize the courses and filters UI
* User selects and applies search filters / query to the search module and submits their query.
  * user can use the filters
* System queries the DB based on User’s requirements.
  * System can load course data from DB
  * System can filter course data from DB
* System provides a view of applicable Courses to the User in the Filtered Course view.
* User selects a Course to proceed with View a Course or does some other action.
  * provide buttons for actions

## 2. View a Course **(CORE)**

* **Who**: Student / Teacher / Anyone basically
* **What**: Views a single Course description
* **Why**: To obtain information about a Course

  ### Feature breakdown

1. User is somehow directed to the Course page via a link / another feature / etc.
2. The System provides the User with a Course page with several elements: title, short details, long description…
3. The User sees and marvels
4. …
5. Profit

## 3. Enroll to course **(CORE)**

* **Who**: Student / Teacher / Admin
* **What**: enroll yourself or a student in a course
* **Why**: To be officially enrolled in a currently offered course (or on a waiting list)

As a student, teacher, or admin, I want to enroll myself or a specified student into a course so that I can officially register for the course (or be added to a waiting list if capacity is exceeded), ensuring proper access to course materials and tracking.
Feature breakdown

1. The user navigates to the course view page (e.g., via course discovery or a direct link) and selects the "Enroll" option.
2. The system checks the user's authentication and authorization details from the current session to determine eligibility (e.g., verifying if the user is a current student, teacher, or admin).
3. If the user is a teacher or admin, the system prompts for additional input: the student ID or details of the person to enroll.
4. For students, the system validates mandatory prerequisites, such as completed prior courses, current credit limits, and enrollment caps.
5. The system retrieves available course tickets (schedules or sections) from the persistence layer (e.g., database) and displays them to the user for selection.
6. The user selects a preferred ticket.
7. The system performs additional checks on the selected ticket, including capacity availability, schedule conflicts with the enrollee's existing timetable, and any overlaps with other courses.
8. Based on the validation outcomes:

   * If all checks pass, the system enrolls the student by updating the course roster in the persistence layer, assigns them to the ticket, and logs the action for auditing.
   * If capacity is exceeded, the system adds the student to a waiting list and notifies them.
   * If mandatory checks fail, the system displays an error message with details.
   * If non-mandatory checks (e.g., minor warnings) fail, the system shows a warning but allows proceeding if the user confirms.


9. The system refreshes the user's dashboard or course view, displaying a success notification, updated enrollment status, and any relevant outputs (e.g., confirmation email or updated timetable).
10. Behind the scenes, the system updates related records (e.g., credit counts, waiting list positions) and ensures data consistency across modules like course management and student profiles.

Responsibilities
**Authentication and session management responsibilities**

Fetch authentication data from an external authenticator upon user login.
Store and maintain authentication details in the current session for quick access.

**Authorization and eligibility validation responsibilities**

Determine user roles (student, teacher, admin) based on session data.
For teachers: Verify if they are assigned to teach the course.
For admins: Grant unrestricted enrollment privileges.
For students: Check prerequisites (e.g., passed courses) and current credit limits against system-defined maximums.
Prompt for additional student details (e.g., ID) when a teacher or admin is enrolling on behalf of someone.

**Course data retrieval responsibilities**

Query the persistence layer to fetch course details, including available tickets and current enrollment counts.
Filter and cache course data temporarily for efficient display during the enrollment process.

**Ticket selection and validation responsibilities**

Display available tickets with details like schedule, capacity, and instructor.
Validate selected ticket against the enrollee's existing timetable for conflicts.
Check ticket capacity and automatically handle overflow by routing to waiting list management.
Report validation results (success, warnings, errors) back to the user interface.

**Enrollment execution responsibilities**

Update the course roster in the persistence layer by adding the student's ID to the selected ticket.
Adjust related student records, such as incrementing credit counts or updating study progress.
Handle waiting list additions, including position assignment and notifications for future availability.

**Notification responsibilities**

Generate success, warning, or error notifications for display on the user interface.
Send confirmation outputs, such as emails or in-app messages, to the enrollee and relevant parties (e.g., teacher).

**Auditing and logging responsibilities**

Log all enrollment actions, including user details, timestamps, and outcomes, for audit trails.
Monitor for anomalies (e.g., repeated failed attempts) to ensure system security and compliance.

**Error handling and recovery responsibilities**

Display descriptive error messages for failed validations without exposing sensitive data.
Allow user confirmation for proceeding with warnings (e.g., minor schedule overlaps).

**Data consistency and persistence responsibilities**

Ensure atomic updates across related entities (e.g., course, student, ticket) to avoid inconsistencies.
Communicate with persistence layer modules (e.g., course manager) to store changes durably.
Sync waiting lists with course capacities to promote users automatically when spots open.

**User interface interaction responsibilities**

Provide interactive elements like buttons, forms, and prompts for input collection (e.g., ticket selection).
Handle user inputs securely, validating them client-side before submission to reduce server load.
Offer fallback options, such as canceling enrollment or redirecting to support if issues arise.

## 4. Leave courses **(CORE)**

* **Who**: Student
* **What:** Leave a course
* **Why**: To be leave a course (I as a student need to be able to leave boring courses)

### Features breakdown

1. The student clicks (on enrolled course view)
2. The system queries the DB and fetches enrolled courses for the given student
3. The systems show the course view.
4. The student clicks “LEAVE COURSE” on the course which he wants to leave.
5. The system displays notification if he is sure that he wants to leave the course
   1. Student selects Cancel.
      1. The system closes the popup and the student sees again the enrolled course view
   2. Student selects Confirm.
      1. The system removes the student from the specified course.
      2. The system queries the DB and removes the course from the student’s enrolled course.
      3. The system closes the popup and refreshes the enrolled course view.



## 5. Manage courses of students **(CORE)**

* **Who**: Study department officer, teacher
* **What**: enroll and kick students to and from courses
* **Why**: to correct mistakes and solve special situations


## 6. Communicate with other students

* **Who**: Student/Teacher
* **What**: communicate with other students
* **Why**: be able to ask questions or schedule meetings with teachers


## 7. Prerequisites

* **Who**: student
* **What**: find prerequisite and check if he/she has completed them
* **Why**: to ensure he/she is able to enroll and can count on it


## 8. Copilot

* **Who**: student
* **What**: AI copilot to help me with what courses might suit me
* **Why**: because I do not possess free will


## 9. Current statistics

* **Who**: student / teacher / study department
* **What**: check current enrollment status
* **Why**: to assess current state of enrollment (jaký je zájem a tak)

## 10. Historical stats

* **Who**: student / teacher / study department
* **What**: access course stats from previous years
* **Why:** to learn from history, how popular it was,...

## 11. Course Surveys

* **Who**: student / teacher / study department
* **What**: check / add course surveys
* **Why**: to assess the opinion of others on course / share one’s opinion


## 12. Create a mock timetable

* **Who**: student
* **What**: create your own timetable
* **Why**: to check if some courses are scheduled at the same time


## 13. Remaining mandatory courses
